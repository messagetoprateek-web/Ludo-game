
<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ludo Demo – Freemium Time Model (Demo)</title>
  <style>
    :root{
      --bg: #0f172a;
      --card: #0b1220;
      --muted: #94a3b8;
      --p1: #ef4444; /* red */
      --p2: #06b6d4; /* cyan */
      --p3: #f59e0b; /* amber */
      --p4: #10b981; /* green */
      --accent: #7c3aed;
    }
    *{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{margin:0; background:linear-gradient(180deg,#0b1220 0%, #071029 100%); color:#e6eef8; min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:24px;}
    .app{width:1100px; max-width:100%; display:grid; grid-template-columns:720px 1fr; gap:20px;}
    .card{background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.04); padding:16px; border-radius:12px; box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    header{display:flex; gap:12px; align-items:center; margin-bottom:8px;}
    .logo{background:linear-gradient(90deg,var(--accent),#06b6d4); width:44px; height:44px; border-radius:10px; display:grid; place-items:center; font-weight:800; color:white; font-size:18px;}
    h1{font-size:18px;margin:0}
    p.mute{color:var(--muted); margin:0; font-size:13px}
    /* Board */
    .board-wrap{display:flex; gap:12px; align-items:flex-start;}
    .board{width:540px; height:540px; background:#f8fafc; border-radius:10px; padding:10px; position:relative;}
    .cell{width:60px; height:60px; border:1px solid rgba(0,0,0,0.06); display:flex; align-items:center; justify-content:center; font-size:11px; position:relative; background:white;}
    .row{display:flex;}
    .grid{display:grid; grid-template-columns: repeat(9,60px); grid-auto-rows:60px; gap:0; background:transparent;}
    /* home corners */
    .home{width:180px;height:180px;border-radius:8px;padding:8px;display:flex;flex-wrap:wrap;gap:6px;align-content:center;justify-content:center;}
    .home.red{background:linear-gradient(135deg,var(--p1),#fff1f2);}
    .home.cyan{background:linear-gradient(135deg,var(--p2),#ecfeff);}
    .home.amber{background:linear-gradient(135deg,var(--p3),#fff7ed);}
    .home.green{background:linear-gradient(135deg,var(--p4),#ecfdf5);}
    .token{width:32px;height:32px;border-radius:50%;display:grid;place-items:center;color:#062024;font-weight:700;box-shadow:0 4px 8px rgba(2,6,23,0.25);cursor:pointer}
    .token.red{background:var(--p1)}.token.cyan{background:var(--p2)}.token.amber{background:var(--p3)}.token.green{background:var(--p4)}
    /* controls */
    .controls{display:flex;flex-direction:column;gap:8px}
    .dice{width:120px;height:120px;border-radius:12px;background:linear-gradient(180deg,#fff 0%, #f1f5f9 100%); color:#0b1220; display:grid; place-items:center; font-size:34px; font-weight:700; box-shadow:0 8px 20px rgba(2,6,23,0.35);}
    button.btn{background:linear-gradient(90deg,var(--accent),#06b6d4);border:none;color:white;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}
    .info{font-size:13px;color:var(--muted);line-height:1.4}
    .players{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
    .player-card{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;display:flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,0.02)}
    .player-dot{width:14px;height:14px;border-radius:4px}
    .logs{height:140px;overflow:auto;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-size:13px}
    .footer-note{font-size:12px;color:var(--muted);margin-top:8px}
    .timer{font-weight:800;font-size:20px}
    .center-cta{display:flex;gap:8px;align-items:center}
    .small{font-size:12px;color:var(--muted)}
    /* responsive */
    @media (max-width:1000px){.app{grid-template-columns:1fr;}.board{width:100%;height:auto}.grid{grid-template-columns:repeat(9,calc((100% - 18px)/9)); grid-auto-rows:calc((100% - 18px)/9)} }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <header>
        <div class="logo">LUDO</div>
        <div>
          <h1>Ludo Demo – Freemium Time Model</h1>
          <p class="mute">5 min free match • Pass-and-play 2–4 players • "Buy Extra Time" simulated payment</p>
        </div>
      </header>

      <div class="board-wrap">
        <div class="board" id="board" aria-hidden="false">
          <!-- We'll render grid via JS -->
          <div id="boardGrid" class="grid"></div>
        </div>

        <aside class="controls" style="width:320px;">
          <div style="display:flex;align-items:center;justify-content:space-between;">
            <div>
              <div class="small">Match Timer</div>
              <div class="timer" id="timer">05:00</div>
            </div>
            <div style="text-align:right">
              <div class="small">Players</div>
              <div id="playerCountText">2 Players</div>
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:10px;align-items:center;">
            <div class="dice" id="dice">-</div>
            <div style="flex:1;display:flex;flex-direction:column;gap:8px;">
              <button class="btn" id="rollBtn">Roll Dice</button>
              <div style="display:flex;gap:6px;">
                <button class="ghost" id="newGame">New Game</button>
                <button class="ghost" id="togglePlayers">Toggle Players (2/3/4)</button>
              </div>
            </div>
          </div>

          <div style="margin-top:12px">
            <div style="display:flex;justify-content:space-between;align-items:center;"><div class="small">Buy Extra Time</div><div class="small">₹0 (Demo)</div></div>
            <div style="display:flex;gap:8px;margin-top:8px;">
              <button class="btn" id="buy5">Buy +5 min</button>
              <button class="btn" id="buy10">Buy +10 min</button>
            </div>
            <div class="footer-note">※ Demo mode: payments simulated. In production, integrate Razorpay/Stripe.</div>
          </div>

          <div class="players">
            <div class="player-card"><div class="player-dot" style="background:var(--p1)"></div><div><strong id="p1name">Player 1</strong><div class="small">Tokens left: <span id="p1left">4</span></div></div></div>
            <div class="player-card"><div class="player-dot" style="background:var(--p2)"></div><div><strong id="p2name">Player 2</strong><div class="small">Tokens left: <span id="p2left">4</span></div></div></div>
            <div class="player-card" id="p3card" style="display:none"><div class="player-dot" style="background:var(--p3)"></div><div><strong id="p3name">Player 3</strong><div class="small">Tokens left: <span id="p3left">4</span></div></div></div>
            <div class="player-card" id="p4card" style="display:none"><div class="player-dot" style="background:var(--p4)"></div><div><strong id="p4name">Player 4</strong><div class="small">Tokens left: <span id="p4left">4</span></div></div></div>
          </div>

          <div style="margin-top:12px">
            <div class="small">Activity Log</div>
            <div class="logs" id="logs"></div>
          </div>
        </aside>
      </div>

      <div style="margin-top:12px" class="small">
        Hosting tip: Upload this file to GitHub Pages / Netlify for a sharable demo link.
      </div>
    </div>

    <div class="card" style="height:fit-content;">
      <h3 style="margin:0 0 8px 0">How to Play (Demo)</h3>
      <div class="info">
        • Ye pass-and-play demo hai: har player apne turn par dice roll karega. <br>
        • 6 aane par token board me aayega (enter) aur fir move kar sakega. <br>
        • Match default 5 minutes chalega. <br>
        • "Buy Extra Time" se aap match me extra minute add kar sakte ho (demo: simulated payment). <br>
        • Goal: Apne sab token ko finish lane tak le jao. Game simple rules follow karta hai (no complex captures in demo). <br>
      </div>

      <hr style="margin:12px 0 14px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)">

      <h3 style="margin:0 0 8px 0">Demo Controls & Next Steps</h3>
      <div class="info">
        • <strong>Roll Dice</strong> – roll karein. <br>
        • <strong>New Game</strong> – reset. <br>
        • <strong>Toggle Players</strong> – 2/3/4 player mode. <br>
        • For real payments: integrate Razorpay/Paytm and call a backend to unlock time. <br>
      </div>

      <hr style="margin:12px 0 14px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)">

      <div style="margin-top:8px">
        <strong>Steps to get live link:</strong>
        <ol class="small" style="padding-left:18px;margin:8px 0 0 0;color:var(--muted)">
          <li>Create free GitHub account if not present.</li>
          <li>Create new repo named <code>ludo-demo</code> and upload this HTML file as <code>index.html</code>.</li>
          <li>Enable GitHub Pages from repo settings -> set source = main branch -> root folder.</li>
          <li>GitHub will provide a live link in a minute.</li>
        </ol>
      </div>
    </div>
  </div>

<script>
// Simple pass-and-play Ludo logic (client-side only). Designed for demo/showcase.
// Board representation: 9x9 grid visual - but internal path simplified as 52 main positions + home entries.
// Each player has 4 tokens. Enter on roll 6. Movement linear along path. Finish track not strictly full Ludo rules but simulated.

const PLAYER_COLORS = ['red','cyan','amber','green'];
const START_POS = { red:0, cyan:13, amber:26, green:39 }; // starting index on circular path
const HOME_INDEX = { red: 52, cyan: 53, amber: 54, green:55 }; // not used visually much
let players = 2;
let state = null;
let timerInterval = null;

function log(msg){
  const logs = document.getElementById('logs');
  const el = document.createElement('div');
  el.textContent = (new Date()).toLocaleTimeString() + ' — ' + msg;
  logs.prepend(el);
}

function initGame(){
  // default 2 players
  state = {
    playersArr: [],
    turn:0,
    dice: null,
    startedAt: Date.now(),
    timeLeft: 5*60, // seconds default
    running: true,
    finished: false
  };
  for(let i=0;i<players;i++){
    const p = {
      id:i,
      color:PLAYER_COLORS[i],
      tokens: [ -1, -1, -1, -1 ], // -1 = at home, otherwise position index along path (0-51), 100+ = finished
      finishedCount:0,
      name: 'Player ' + (i+1)
    };
    state.playersArr.push(p);
  }
  updatePlayerUI();
  renderBoard();
  startTimer();
  log('New game started with '+players+' players.');
}

function updatePlayerUI(){
  document.getElementById('playerCountText').textContent = players + ' Players';
  for(let i=1;i<=4;i++){
    const card = document.getElementById('p'+i+'card') || document.getElementById('p'+i+'name');
    if(i<=players){
      document.getElementById('p'+i+'card').style.display = 'flex';
    } else {
      document.getElementById('p'+i+'card').style.display = 'none';
    }
    document.getElementById('p'+i+'left').textContent = (state ? (4 - state.playersArr[i-1].finishedCount) : 4);
  }
}

function renderBoard(){
  const grid = document.getElementById('boardGrid');
  grid.innerHTML = '';
  // We'll create a 9x9 grid visually and mark special areas
  const special = {};
  // Mark corner homes
  // Build 9x9 with cells
  for(let r=0;r<9;r++){
    for(let c=0;c<9;c++){
      const cell = document.createElement('div');
      cell.className='cell';
      // Use indices roughly to place path
      // We'll not label all cells; markers for player home areas
      // Place homes at four corners (2x2) centered as 180x180 in CSS originally, but here approximate
      if((r<3 && c<3)){
        // top-left home red
        cell.style.background = 'linear-gradient(135deg, #fee2e2 0%, #fff 100%)';
      }
      if((r<3 && c>5)){
        // top-right home cyan
        cell.style.background = 'linear-gradient(135deg, #ecfeff 0%, #fff 100%)';
      }
      if((r>5 && c<3)){
        // bottom-left amber
        cell.style.background = 'linear-gradient(135deg, #fff7ed 0%, #fff 100%)';
      }
      if((r>5 && c>5)){
        // bottom-right green
        cell.style.background = 'linear-gradient(135deg, #ecfdf5 0%, #fff 100%)';
      }
      grid.appendChild(cell);
    }
  }
  // Now overlay tokens on top using absolute positioning simpler: we'll create a small token area
  // But simpler: Below grid we'll create tokens area within board to click/move - we'll create tokens separately
  renderTokens();
}

function renderTokens(){
  // Remove existing token layer
  const existing = document.getElementById('tokenLayer');
  if(existing) existing.remove();
  const layer = document.createElement('div');
  layer.id='tokenLayer';
  layer.style.position='absolute';
  layer.style.left='10px'; layer.style.top='10px';
  layer.style.width='520px'; layer.style.height='520px'; layer.style.pointerEvents='none';
  document.getElementById('board').appendChild(layer);

  // For demo, we place home tokens in corner areas for each player.
  for(let p of state.playersArr){
    for(let t=0;t<4;t++){
      const tok = document.createElement('div');
      tok.className = 'token ' + p.color;
      tok.textContent = (t+1);
      tok.style.position='absolute';
      tok.style.pointerEvents='auto';
      const pos = getHomeTokenPos(p.id,t);
      tok.style.left = pos.x + 'px'; tok.style.top = pos.y + 'px';
      tok.dataset.player = p.id; tok.dataset.token = t;
      tok.title = p.name + ' token ' + (t+1);
      tok.addEventListener('click', onTokenClick);
      layer.appendChild(tok);
    }
  }
}

function getHomeTokenPos(pid, tid){
  // returns coordinates within 520x520 area
  const pad = 12;
  const area = 520-2*pad;
  const cornerSize = area/3; // 173
  let x=0,y=0;
  if(pid===0){ // top-left
    x = pad + (tid%2)*40 + 12; y = pad + Math.floor(tid/2)*40 + 12;
  } else if(pid===1){ // top-right
    x = pad + 3*cornerSize + (tid%2)*40 + 12; y = pad + Math.floor(tid/2)*40 + 12;
  } else if(pid===2){ // bottom-left
    x = pad + (tid%2)*40 + 12; y = pad + 3*cornerSize + Math.floor(tid/2)*40 + 12;
  } else { // pid===3 bottom-right
    x = pad + 3*cornerSize + (tid%2)*40 + 12; y = pad + 3*cornerSize + Math.floor(tid/2)*40 + 12;
  }
  return {x,y};
}

function onTokenClick(e){
  const p = parseInt(e.currentTarget.dataset.player,10);
  const t = parseInt(e.currentTarget.dataset.token,10);
  // allow manual move only if it's current player's token and dice rolled
  if(state.turn !== p){ alert('Aapka wait kijiye - current turn: '+(state.turn+1)); return; }
  if(state.dice === null){ alert('Pehle dice roll karein'); return; }
  const playerObj = state.playersArr[p];
  // If token at home (-1) require dice ===6 to enter
  const pos = playerObj.tokens[t];
  if(pos === -1 && state.dice !==6){
    alert('Token ko board me lane ke liye 6 chahiye'); return;
  }
  // move token along simplified path
  if(pos === -1){
    playerObj.tokens[t] = START_POS[playerObj.color] || 0;
    log(playerObj.name + ' token '+(t+1)+' entered board.');
  } else {
    playerObj.tokens[t] = (playerObj.tokens[t] + state.dice) % 52;
    log(playerObj.name + ' token '+(t+1)+' moved by '+state.dice+' steps.');
    // simple finish rule: if loops certain times, mark finished (not strict)
    if(playerObj.tokens[t] >= 98){
      playerObj.tokens[t] = 100 + t;
      playerObj.finishedCount += 1;
      log(playerObj.name + ' token '+(t+1)+' finished!');
    }
  }
  state.dice = null;
  updateAfterMove();
}

function updateAfterMove(){
  // re-render tokens simplistic: move home tokens; for demo we won't animate on track
  // For simplicity, tokens moved will be placed near center offset by their logical position
  const layer = document.getElementById('tokenLayer');
  for(const node of layer.children){
    const pid = parseInt(node.dataset.player,10);
    const tid = parseInt(node.dataset.token,10);
    const pObj = state.playersArr[pid];
    const pos = pObj.tokens[tid];
    if(pos === -1){
      const xy = getHomeTokenPos(pid, tid);
      node.style.left = xy.x + 'px'; node.style.top = xy.y + 'px';
    } else if(pos >= 0 && pos < 52){
      // place on approximate circular path
      const angle = (pos / 52) * Math.PI * 2 - Math.PI/2;
      const cx = 260, cy = 260, radius = 170;
      const x = cx + Math.cos(angle)*radius - 16;
      const y = cy + Math.sin(angle)*radius - 16;
      node.style.left = x + 'px'; node.style.top = y + 'px';
    } else {
      // finished - push to finish area near center
      const offset = tid*36;
      node.style.left = (260 + 40 + offset) + 'px'; node.style.top = (260 - 20) + 'px';
    }
  }
  // update UI finished counts
  for(let i=0;i<players;i++){
    document.getElementById('p'+(i+1)+'left').textContent = 4 - state.playersArr[i].finishedCount;
  }
  // check win condition
  const winners = state.playersArr.filter(p=>p.finishedCount>=4);
  if(winners.length>0){
    state.running=false; state.finished=true;
    alert('Game over! Winner: ' + winners[0].name);
    log('Game over. Winner: '+winners[0].name);
    stopTimer();
  } else {
    // next turn
    state.turn = (state.turn +1) % players;
    log('Turn: Player '+(state.turn+1));
  }
  state.dice=null;
  document.getElementById('dice').textContent='-';
}

document.getElementById('rollBtn').addEventListener('click', ()=>{
  if(!state.running){ alert('Game not running. Start new game.'); return; }
  const cur = state.playersArr[state.turn];
  const val = Math.floor(Math.random()*6)+1;
  state.dice = val;
  document.getElementById('dice').textContent = val;
  log(cur.name + ' rolled ' + val);
  // if no movable tokens and val!=6 then skip turn
  const movable = hasMovableToken(cur,val);
  if(!movable){
    log(cur.name + ' has no movable token. Turn skipped.');
    state.turn = (state.turn+1)%players;
  }
});

function hasMovableToken(playerObj, diceVal){
  // check any token can move: either at home and dice==6, or already on board
  for(let tok of playerObj.tokens){
    if(tok === -1 && diceVal===6) return true;
    if(tok >=0) return true;
  }
  return false;
}

document.getElementById('newGame').addEventListener('click', ()=>{
  if(confirm('Start new game?')) initGame();
});

document.getElementById('togglePlayers').addEventListener('click', ()=>{
  players = players===2?3: players===3?4:2;
  initGame();
});

document.getElementById('buy5').addEventListener('click', ()=>{ simulatePurchase(5); });
document.getElementById('buy10').addEventListener('click', ()=>{ simulatePurchase(10); });

function simulatePurchase(minutes){
  // demo fake payment flow
  const ok = confirm('Simulated payment: Add ' + minutes + ' minutes to match? (Demo ONLY)');
  if(!ok) return;
  state.timeLeft += minutes*60;
  log('Added '+minutes+' minutes via simulated purchase.');
  updateTimerDisplay();
  alert(minutes + ' minute(s) added. (Demo)');
}

function startTimer(){
  stopTimer();
  timerInterval = setInterval(()=>{
    if(!state.running) return;
    state.timeLeft -= 1;
    if(state.timeLeft <=0){
      state.timeLeft = 0; state.running=false;
      updateTimerDisplay();
      stopTimer();
      alert('Match ended (time up).');
      log('Match ended by timer.');
      return;
    }
    updateTimerDisplay();
  },1000);
}

function stopTimer(){ if(timerInterval) clearInterval(timerInterval); timerInterval=null; }

function updateTimerDisplay(){
  const m = Math.floor(state.timeLeft/60).toString().padStart(2,'0');
  const s = (state.timeLeft%60).toString().padStart(2,'0');
  document.getElementById('timer').textContent = `${m}:${s}`;
}

initGame();

// small accessibility: focus roll button loop
document.getElementById('rollBtn').addEventListener('keydown', (e)=>{ if(e.key==='Enter') e.target.click(); });
</script>
</body>
</html>
